<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Controller">
    <meta name="theme-color" content="#0e0e0e">
    <title>Xbox Web Controller</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Connection Status Pill -->
    <div id="status-bar">
        <span id="status-dot"></span>
        <span id="status-text">Connectingâ€¦</span>
        <span id="player-badge"></span>
    </div>

    <div id="controller">

        <!-- ===== LEFT SHOULDER STRIP ===== -->
        <div class="shoulder-strip left-strip">
            <button id="lt" class="trigger-btn" data-label="LT">
                <div class="trigger-fill" id="lt-fill"></div>
                <span>LT</span>
            </button>
            <button id="lb" class="shoulder-btn">LB</button>
        </div>

        <!-- ===== LEFT PANEL ===== -->
        <div class="panel left-panel">
            <!-- Left Stick -->
            <div id="ls" class="joystick">
                <div class="joystick-base"></div>
                <div class="stick" id="ls-stick"></div>
            </div>

            <!-- D-Pad -->
            <div class="dpad">
                <button id="dpad-up" class="dpad-btn dpad-up">â–²</button>
                <div class="dpad-row">
                    <button id="dpad-left" class="dpad-btn dpad-left">â—€</button>
                    <div class="dpad-center"></div>
                    <button id="dpad-right" class="dpad-btn dpad-right">â–¶</button>
                </div>
                <button id="dpad-down" class="dpad-btn dpad-down">â–¼</button>
            </div>

            <!-- Left Stick Click (LS) -->
            <button id="ls-click" class="stick-click-btn">LS</button>
        </div>

        <!-- ===== CENTER PANEL ===== -->
        <div class="center-panel">
            <button id="view" class="sys-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="white">
                    <rect x="2" y="5" width="9" height="7" rx="1" />
                    <rect x="13" y="5" width="9" height="7" rx="1" opacity=".5" />
                    <rect x="2" y="14" width="9" height="5" rx="1" opacity=".5" />
                    <rect x="13" y="14" width="9" height="5" rx="1" />
                </svg>
                <span>View</span>
            </button>
            <button id="home" class="xbox-home-btn">
                <!-- Xbox sphere icon -->
                <svg viewBox="0 0 100 100" width="32" height="32">
                    <circle cx="50" cy="50" r="48" fill="#107c10" />
                    <text x="50" y="67" text-anchor="middle" font-size="62" font-family="Arial" fill="white"
                        font-weight="bold">âŠ•</text>
                </svg>
            </button>
            <button id="menu" class="sys-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="white">
                    <rect x="4" y="7" width="4" height="1.5" rx=".75" />
                    <rect x="10" y="7" width="10" height="1.5" rx=".75" />
                    <rect x="4" y="11" width="4" height="1.5" rx=".75" />
                    <rect x="10" y="11" width="10" height="1.5" rx=".75" />
                    <rect x="4" y="15" width="4" height="1.5" rx=".75" />
                    <rect x="10" y="15" width="10" height="1.5" rx=".75" />
                </svg>
                <span>Menu</span>
            </button>
        </div>

        <!-- ===== RIGHT PANEL ===== -->
        <div class="panel right-panel">
            <!-- ABXY Cluster -->
            <div class="abxy">
                <button id="y" class="face-btn y-btn">Y</button>
                <div class="abxy-mid">
                    <button id="x" class="face-btn x-btn">X</button>
                    <button id="b" class="face-btn b-btn">B</button>
                </div>
                <button id="a" class="face-btn a-btn">A</button>
            </div>

            <!-- Right Stick -->
            <div id="rs" class="joystick">
                <div class="joystick-base"></div>
                <div class="stick" id="rs-stick"></div>
            </div>

            <!-- Right Stick Click (RS) -->
            <button id="rs-click" class="stick-click-btn">RS</button>
        </div>

        <!-- ===== RIGHT SHOULDER STRIP ===== -->
        <div class="shoulder-strip right-strip">
            <button id="rt" class="trigger-btn" data-label="RT">
                <div class="trigger-fill" id="rt-fill"></div>
                <span>RT</span>
            </button>
            <button id="rb" class="shoulder-btn">RB</button>
        </div>

    </div>

    <!-- Portrait lock overlay -->
    <div id="rotate-overlay">
        <div class="rotate-icon">ðŸ“±</div>
        <div>Rotate your phone to landscape</div>
    </div>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="app.js"></script>
    <script>
        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => { });
        }
    </script>
</body>

</html>